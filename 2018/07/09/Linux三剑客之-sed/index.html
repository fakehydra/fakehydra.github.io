<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="瑾川"><link rel="alternative" href="/atom.xml" title="瑾川" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Linux三剑客之 sed - 瑾川</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">瑾川</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-07-09T10:48:31.000Z">July 9, 2018</time><h1 class="post__title"><a href="/2018/07/09/Linux三剑客之-sed/">Linux三剑客之 sed</a></h1><div class="post__main echo"><p>Linux三剑客之一</p>
<a id="more"></a>
<h4 id="Linux三剑客命令之-sed"><a href="#Linux三剑客命令之-sed" class="headerlink" title="Linux三剑客命令之 sed"></a>Linux三剑客命令之 sed</h4><h3 id="1-sed-命令详解"><a href="#1-sed-命令详解" class="headerlink" title="1.sed 命令详解"></a>1.sed 命令详解</h3><pre><code>sed是Stream Editor（字符流编辑器）的缩写，简称流编辑器
sed是操作、过滤和转换文本内容的强大工具。常用功能包括对文件实现快速增删改查，
其中查询的功能中最常用的两大功能是过滤（过滤指定字符串），取行（取出指定行）。
</code></pre><h3 id="2-语法格式"><a href="#2-语法格式" class="headerlink" title="2.语法格式"></a>2.语法格式</h3><h2 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h2><pre><code>1）sed以及后面的选项、命令和输入文件，每个元素之间都至少要一个空格。
2）sed内置命令行字符，既可以是单个命令，也可以是多个命令参数的组合
3）输入文件是sed需要处理的文件，这是可选项；sed还能够从标准输入如管道中获取输入。
</code></pre><h3 id="3-选项说明"><a href="#3-选项说明" class="headerlink" title="3.选项说明"></a>3.选项说明</h3><h2 id="sed命令的参数选项及说明"><a href="#sed命令的参数选项及说明" class="headerlink" title="sed命令的参数选项及说明"></a>sed命令的参数选项及说明</h2><pre><code>参数选项    |     解释说明

 -n        |   取消默认的sed输出，常与sed内置命令的p 连用

 -i        |   直接修改文件内容，而不是输出到终端。
           |   如果不适用-i 选项，则sed 只是修改内存中的数据，并不会影响磁盘上的文件
</code></pre><h2 id="sed常用内置命令字符的功能说明"><a href="#sed常用内置命令字符的功能说明" class="headerlink" title="sed常用内置命令字符的功能说明"></a>sed常用内置命令字符的功能说明</h2><pre><code> sed的内置命令字符    |     解释说明

 a(append)          |    表示追加文本，在指定行后面添加一行或多行文本


 [root@jinc1 test]# sed &apos;2a 6,dandan,CSO&apos; persons.txt 
  1,oldboy,CEO
  2,zhangyao,CTO
  6,dandan,CSO
  3,alex,CFO
  4,yy,CFO
  5,feixue,CIO
  (在第2行后添加6,dandan,CSO)   




 i(insert)          |    表示插入文本，在指定行前面添加一行或者多行文本
 [root@jinc1 test]# sed &apos;2i 6,dandan,CTO&apos; persons.txt 
  1,oldboy,CEO
  6,dandan,CTO
  2,zhangyao,CTO
  3,alex,CFO
  4,yy,CFO
  5,feixue,CIO


d(delete)           |    只在输出时删除指定行的文本
[root@jinc1 test]# sed &apos;2d&apos; persons.txt 
 1,oldboy,CEO
 3,alex,CFO
 4,yy,CFO
 5,feixue,CIO

 p(print)           |      表示打印匹配行的内容，通常p会与选项-n一起使用
[root@jinc1 test]# sed &apos;2p&apos; persons.txt 
 1,oldboy,CEO
 2,zhangyao,CTO
 2,zhangyao,CTO
 3,alex,CFO
 4,yy,CFO
 5,feixue,CIO
</code></pre><h2 id="当我们只使用-p的时候不只是输出第二行，其他内容也输出出来了（sed的默认输出功能），"><a href="#当我们只使用-p的时候不只是输出第二行，其他内容也输出出来了（sed的默认输出功能），" class="headerlink" title="当我们只使用 p的时候不只是输出第二行，其他内容也输出出来了（sed的默认输出功能），"></a>当我们只使用 p的时候不只是输出第二行，其他内容也输出出来了（sed的默认输出功能），</h2><p>所以，我们一般使用-n来取消默认输出，只输出匹配行文本</p>
<pre><code>[root@jinc1 test]# sed -n &apos;2p&apos; persons.txt 
2,zhangyao,CTO

 s/regexp/replacement/  |      匹配regexp部分内容，用replacement替换regexp匹配的内容，
 regexp部分可以使用正则表达式，在replacement部分可以使用特殊字符串&amp;和\1-\9等匹配regexp部
 分的部分内容。在实战场景中，s/regexp/replacement/  结尾常与g匹配做全局的替换。

[root@jinc1 test]# sed &apos;s#zhangyao#dandan#g&apos; persons.txt 
 1,oldboy,CEO
 2,dandan,CTO
 3,alex,CFO
 4,yy,CFO
 5,feixue,CIO
</code></pre><h3 id="未完待续"><a href="#未完待续" class="headerlink" title="-未完待续-"></a>-未完待续-</h3><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="0" height="0" src="//music.163.com/outchain/player?type=2&id=28762749&auto=1&height=66"></iframe>



</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/那些年学习的Linux命令/">那些年学习的Linux命令</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 瑾川</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>